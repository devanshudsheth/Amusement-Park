CREATE TABLE STAFF (SALARY INT(10) NOT NULL DEFAULT 0 , NAME VARCHAR(30) NOT NULL , SSN VARCHAR(9) NOT NULL , WORKING_HOURS INT(2) NOT NULL DEFAULT 0 , BDATE DATE NULL , GENDER CHAR(1) NULL , PRIMARY KEY (SSN(9))) ENGINE = InnoDB;
ALTER TABLE staff ADD INDEX(BDATE);

CREATE TABLE Manager ( SSN VARCHAR(9) NOT NULL , PRIMARY KEY (SSN)) ENGINE = InnoDB;
ALTER TABLE manager ADD CONSTRAINT MGR_SSN_Constraint FOREIGN KEY (SSN)REFERENCES staff(SSN) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE STALL ( STALL_ID VARCHAR(10) NOT NULL , STALL_NAME VARCHAR(20) NOT NULL , STALL_LOCATION VARCHAR(20) NULL , STALL_TYPE VARCHAR(15) NOT NULL , MGR_SSN VARCHAR(9), PRIMARY KEY (STALL_ID)) ENGINE = InnoDB;
ALTER TABLE STALL ADD CONSTRAINT MGR_SSN_F_K FOREIGN KEY (MGR_SSN) REFERENCES MANAGER(SSN) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE ORDERS ( ORDER_ID VARCHAR(10) NOT NULL , ORDER_DATE DATE NOT NULL , QUANTITY INT(100) NOT NULL , PRIMARY KEY (ORDER_ID)) ENGINE = InnoDB;
ALTER TABLE orders ADD INDEX(ORDER_DATE);
ALTER TABLE orders ADD INDEX(QUANTITY);

CREATE TABLE TICKET ( TICKET_NO VARCHAR(10) NOT NULL , VISITOR_NAME VARCHAR(30) NOT NULL , PURCHASE_DATE DATE NOT NULL , TICKET_TYPE VARCHAR(20) NOT NULL , ORDER_ID VARCHAR(10) NOT NULL , PRIMARY KEY (TICKET_NO)) ENGINE = InnoDB;
ALTER TABLE ticket ADD INDEX(PURCHASE_DATE);
ALTER TABLE ticket ADD INDEX(TICKET_TYPE);
ALTER TABLE orders  ADD UNIQUE ORDER_ID_T (ORDER_ID(10));
ALTER TABLE ticket ADD CONSTRAINT ORDER_ID_F_K FOREIGN KEY (ORDER_ID) REFERENCES orders(ORDER_ID) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Visitor (
  Visitor_id varchar(10) NOT NULL,
  Visitor_name varchar(30) NOT NULL,
  Bdate date DEFAULT NULL,
  Gender varchar(1) DEFAULT NULL,
  Email varchar(30) NOT NULL,
  Address varchar(60) DEFAULT NULL
) ENGINE=InnoDB ;
ALTER TABLE Visitor
  ADD PRIMARY KEY (Visitor_id),
  ADD UNIQUE KEY Email (Email);
ALTER TABLE visitor ADD INDEX(Bdate);

CREATE TABLE Visitor_account (
  Email varchar(30) NOT NULL,
  Password varchar(16) NOT NULL,
  Visitor_id varchar(10) NOT NULL
) ENGINE=InnoDB;
ALTER TABLE Visitor_account
  ADD KEY email_constraint (Email),
  ADD KEY visitor_id_constraint (Visitor_id);
ALTER TABLE Visitor_account
  ADD CONSTRAINT email_constraint FOREIGN KEY (Email) REFERENCES Visitor (Email) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT visitor_id_constraint FOREIGN KEY (Visitor_id) REFERENCES Visitor (Visitor_id) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE RideRestrictions ( Restriction_id INT(3) NOT NULL , Height VARCHAR(30) NULL , Weight VARCHAR(30) NULL , Health VARCHAR(50) NULL, PRIMARY KEY (Restriction_id)) ENGINE = InnoDB;

CREATE TABLE Ride ( Ride_No INT(5) NOT NULL , Status VARCHAR(15) NULL DEFAULT NULL , Ride_Name VARCHAR(40) NULL DEFAULT NULL ,Ride_Location VARCHAR(20) NULL DEFAULT NULL , Max_Occupancy INT(5) NULL DEFAULT NULL , Duration INT(3) NULL DEFAULT NULL , Ride_Type VARCHAR(5)NOT NULL , Restriction_id INT(3) NULL DEFAULT NULL , PRIMARY KEY(Ride_No)) ENGINE = InnoDB;
ALTER TABLE Ride ADD INDEX(Restriction_id) using BTREE;
ALTER TABLE ride ADD CONSTRAINT Ride_restriction_constraint FOREIGN KEY(Restriction_id) REFERENCES riderestrictions(Restriction_id) ON DELETE SET NULL ON UPDATE CASCADE;

CREATE TABLE RideEquipment ( Equip_id INT(20) NOT NULL ,Manufacturer VARCHAR(20) NULL DEFAULT NULL , Cost_of_Maintenance DECIMAL(7,2) NULL DEFAULT NULL , Next_Maintenance_Date DATE NULL DEFAULT NULL , Ride_No INT(5) NULL DEFAULT NULL , PRIMARY KEY (Equip_id)) ENGINE =InnoDB;
ALTER TABLE RideEquipment ADD INDEX(Ride_No) using BTREE;
ALTER TABLE rideequipment ADD CONSTRAINT Ride_Equipment_constraint FOREIGN KEY (Ride_No) REFERENCES ride(Ride_No) ON DELETE SET NULL ON UPDATE CASCADE;

CREATE TABLE WORKS_ON ( STALL_ID VARCHAR(10) NOT NULL , SWSSN VARCHAR(9) NOT NULL , SHIFT VARCHAR(50) NULL , PRIMARY KEY (STALL_ID, SWSSN)) ENGINE = InnoDB;
ALTER TABLE works_on ADD CONSTRAINT STALL_W_O FOREIGN KEY (STALL_ID) REFERENCES stall(STALL_ID) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Maintains ( Ride_No INT(3) NOT NULL , TSSN VARCHAR(9) NOT NULL , PRIMARY KEY (Ride_No, TSSN)) ENGINE = InnoDB;
ALTER TABLE maintains ADD CONSTRAINT Ride_No_Constraint FOREIGN KEY(Ride_No) REFERENCES ride(Ride_No) ON DELETE NO ACTION ON UPDATE CASCADE;
ALTER TABLE maintains ADD CONSTRAINT TSSN_Constraint FOREIGN KEY (TSSN) REFERENCES staff(SSN) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Operates ( OSSN VARCHAR(9) NOT NULL ,Ride_No INT(3) NOT NULL , Shift VARCHAR(50) NULL , PRIMARY KEY (OSSN,Ride_No)) ENGINE = InnoDB;
ALTER TABLE operates ADD CONSTRAINT Ride_No_ConstraintOperator FOREIGN KEY(Ride_No) REFERENCES ride(Ride_No) ON DELETE NO ACTION ON UPDATE CASCADE;
ALTER TABLE operates ADD CONSTRAINT OSSN_Constraint FOREIGN KEY (OSSN) REFERENCES staff(SSN) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Rides ( Ride_No INT(3) NOT NULL ,Visitor_id VARCHAR(10) NOT NULL ) ENGINE = InnoDB;
ALTER TABLE rides add unique key visitor_id (visitor_id);
ALTER TABLE rides ADD CONSTRAINT Visitor_id_rides_constraint FOREIGN KEY(Visitor_id) REFERENCES visitor(Visitor_id) ON DELETE NO ACTION ON UPDATE CASCADE;
ALTER TABLE rides ADD CONSTRAINT Ride_no_rides_constraint FOREIGN KEY (Ride_No) REFERENCES ride(Ride_No) ON DELETE NO ACTION ON UPDATE CASCADE;
ALTER TABLE rides add primary key Ride_No(Ride_No)

CREATE TABLE places ( Visitor_id VARCHAR(10) NOT NULL , Order_id VARCHAR(10) NOT NULL ) ENGINE = InnoDBALTER TABLE places add unique key Order_id (Order_id );
ALTER TABLE places add primary key visitor_id (visitor_id);
ALTER TABLE places ADD CONSTRAINT places_order_constraint FOREIGN KEY (Order_id) REFERENCES orders(ORDER_ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE places ADD CONSTRAINT places_visitor_id_constraint FOREIGN KEY(Visitor_id) REFERENCES visitor(Visitor_id) ON DELETE NO ACTION ON UPDATE CASCADE;

CREATE TABLE STAFF_CONTACT_NUMBER ( SSN VARCHAR(9) NOT NULL , CONTACT_NUMBER VARCHAR(10) NOT NULL , PRIMARY KEY (SSN, CONTACT_NUMBER)) ENGINE = InnoDB;
ALTER TABLE staff_contact_number ADD CONSTRAINT SSN_C_N FOREIGN KEY (SSN) REFERENCES staff(SSN) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE STALL_CONTACT_NUMBER ( STALL_ID VARCHAR(10) NOT NULL , STALL_CONTACT_NUMBER VARCHAR(10) NOT NULL , PRIMARY KEY (STALL_ID, STALL_CONTACT_NUMBER)) ENGINE = InnoDB;
ALTER TABLE stall_contact_number ADD CONSTRAINT STALL_C_N FOREIGN KEY (STALL_ID) REFERENCES stall(STALL_ID) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Visitor_Contact_Number ( Visitor_Id VARCHAR(10) NOT NULL , Visitor_Contact_Number VARCHAR(10) NOT NULL , PRIMARY KEY (Visitor_Id(10), Visitor_Contact_Number(10))) ENGINE = InnoDB;
ALTER TABLE visitor_contact_number ADD  CONSTRAINT V_CN_Constraint FOREIGN KEY (Visitor_Id) REFERENCES visitor(Visitor_id) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Water_ride ( Ride_no INT(3) NOT NULL ,Water_depth INT(5) NOT NULL , PRIMARY KEY (Ride_no)) ENGINE = InnoDB;
ALTER TABLE water_ride ADD CONSTRAINT water_ride_constraint FOREIGN KEY(Ride_no) REFERENCES ride(Ride_No) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Land_ride ( Ride_no INT(3) NOT NULL ,Thrill_level INT(1) NULL , PRIMARY KEY (Ride_no)) ENGINE = InnoDB;
ALTER TABLE Land_ride ADD CONSTRAINT land_ride_constraint FOREIGN KEY(Ride_no) REFERENCES ride(Ride_No) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE SEASON_PASS ( TICKET_NO VARCHAR(10) NOT NULL , EXPIRY_DATE DATE NOT NULL , PRIMARY KEY (TICKET_NO)) ENGINE = InnoDB;
ALTER TABLE season_pass ADD CONSTRAINT SEASON_PASS_T_N FOREIGN KEY (TICKET_NO) REFERENCES ticket(TICKET_NO) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE ONE_TIME_TICKET ( TICKET_NO VARCHAR(10) NOT NULL , PRIMARY KEY (TICKET_NO)) ENGINE = InnoDB;
ALTER TABLE one_time_ticket ADD CONSTRAINT D_T FOREIGN KEY (TICKET_NO) REFERENCES ticket(TICKET_NO) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Restaurant_Stall ( Stall_id VARCHAR(10) NOT NULL , PRIMARY KEY (Stall_id)) ENGINE = InnoDB;
ALTER TABLE restaurant_stall ADD CONSTRAINT RESTAURANT_S_ID FOREIGN KEY (Stall_id) REFERENCES stall(STALL_ID) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE GIFT_STALL ( STALL_ID VARCHAR(10) NOT NULL , PRIMARY KEY (STALL_ID)) ENGINE = InnoDB;
ALTER TABLE gift_stall ADD CONSTRAINT G_S_ID FOREIGN KEY (STALL_ID) REFERENCES stall(STALL_ID) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE SKILLED_LABOR ( SSN VARCHAR(9) NOT NULL , JOB_TYPE VARCHAR(25) NOT NULL , PRIMARY KEY (SSN)) ENGINE = InnoDB;
ALTER TABLE skilled_labor ADD CONSTRAINT SK_SSN FOREIGN KEY (SSN) REFERENCES staff(SSN) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE UNSKILLED_LABOR ( SSN VARCHAR(9) NOT NULL , JOB_TYPE VARCHAR(25) NOT NULL , PRIMARY KEY (SSN)) ENGINE = InnoDB;
ALTER TABLE unskilled_labor ADD CONSTRAINT UNSILLED_ssn FOREIGN KEY (SSN) REFERENCES staff(SSN) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE CUISINE ( STALL_ID VARCHAR(10) NOT NULL , CUISINE VARCHAR(20) NOT NULL , PRIMARY KEY (STALL_ID, CUISINE)) ENGINE = InnoDB;
ALTER TABLE cuisine ADD CONSTRAINT CUISINE_S_ID FOREIGN KEY (STALL_ID) REFERENCES restaurant_stall(Stall_id) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE MENU ( STALL_ID VARCHAR(10) NOT NULL , FOOD_ITEM_NAME VARCHAR(50) NOT NULL , FOOD_ITEM_PRICE INT(5) NOT NULL , PRIMARY KEY (STALL_ID, FOOD_ITEM_NAME, FOOD_ITEM_PRICE)) ENGINE = InnoDB;
ALTER TABLE menu ADD CONSTRAINT MENU_S_ID FOREIGN KEY (STALL_ID) REFERENCES restaurant_stall(Stall_id) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE CATALOG ( STALL_ID VARCHAR(10) NOT NULL , ITEM_NAME VARCHAR(50) NOT NULL , ITEM_PRICE INT(5) NOT NULL , PRIMARY KEY (STALL_ID, ITEM_NAME, ITEM_PRICE)) ENGINE = InnoDB;
ALTER TABLE catalog ADD CONSTRAINT CAT_S_ID FOREIGN KEY (STALL_ID) REFERENCES gift_stall(STALL_ID) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE skill_set ( ssn VARCHAR(9) NOT NULL ,  skill VARCHAR(20) NOT NULL ,           PRIMARY KEY  (ssn, skill)) ENGINE = InnoDB;
ALTER TABLE skill_set ADD CONSTRAINT skill_ssn FOREIGN KEY (ssn) REFERENCES skilled_labor(SSN) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE EDUCATIONAL_QUALIFICATION ( SSN VARCHAR(10) NOT NULL , QUALIFICATION VARCHAR(50) NOT NULL , PRIMARY KEY (SSN, QUALIFICATION)) ENGINE = InnoDB;
ALTER TABLE educational_qualification ADD CONSTRAINT EDU_SSN FOREIGN KEY (SSN) REFERENCES skilled_labor(SSN) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Staff_age ( Bdate DATE NOT NULL DEFAULT '0000-00-00' , Age INT(3) NULL ) ENGINE = InnoDB;
ALTER TABLE staff_age ADD PRIMARY KEY(Bdate);
ALTER TABLE staff_age ADD CONSTRAINT bday_constraint_staff FOREIGN KEY(Bdate) REFERENCES staff(BDATE) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE ORDER_PRICE_DETAILS ( ORDER_DATE DATE NOT NULL , QUANTITY INT(100) NOT NULL , PRICE INT(5) NOT NULL , PRIMARY KEY (ORDER_DATE, QUANTITY)) ENGINE = InnoDB;
ALTER TABLE order_price_details ADD CONSTRAINT o_DATE FOREIGN KEY (ORDER_DATE) REFERENCES orders(ORDER_DATE) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE order_price_details ADD CONSTRAINT O_QUANT FOREIGN KEY (QUANTITY) REFERENCES orders(QUANTITY) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE TICKET_PRICE_DETAILS ( PURCHASE_DATE DATE NOT NULL , TICKET_TYPE VARCHAR(20) NOT NULL , TICKET_PRICE INT(5) NOT NULL , PRIMARY KEY (PURCHASE_DATE, TICKET_TYPE)) ENGINE = InnoDB;
ALTER TABLE ticket_price_details ADD CONSTRAINT T_P_D FOREIGN KEY (PURCHASE_DATE) REFERENCES ticket(PURCHASE_DATE) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE ticket_price_details ADD CONSTRAINT T_P_T FOREIGN KEY (TICKET_TYPE) REFERENCES ticket(TICKET_TYPE) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Visitor_age ( Bdate DATE NOT NULL DEFAULT '0000-00-00' , Age INT(3) NULL , PRIMARY KEY (Bdate)) ENGINE = InnoDB;
ALTER TABLE visitor_age ADD CONSTRAINT visitor_age_constraint FOREIGN KEY(Bdate) REFERENCES visitor(Bdate) ON DELETE CASCADE ON UPDATE CASCADE;

CREATE TABLE Staff_salary_log ( SSN VARCHAR(9) NOT NULL ,SALARY INT(10) NOT NULL , DATE DATE NULL , SALARY_RANGE VARCHAR(15), PAY_DESC VARCHAR(10)) ENGINE = InnoDB;

CREATE TABLE Manager_start_date ( MgrSSN VARCHAR(9) NOT NULL , Stall_id VARCHAR(10) NOT NULL , Mgr_start_date DATE NULL ) ENGINE =InnoDB;
